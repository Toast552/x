"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["8275"],{39432:function(e,a,t){t.d(a,{Au:()=>v,Fj:()=>s,LC:()=>o,OV:()=>r,dj:()=>u,gK:()=>d,i7:()=>n,v1:()=>c,xh:()=>p,yW:()=>m});var l=t(34541);let{t:i}=t(76882).Z.global,n=e=>l.e.get("/domains/list",{params:e}),o=()=>l.e.get("/domains/all"),s=e=>l.e.post("/domains/create",e,{fetchOptions:{loading:i("domain.api.loading.creating"),successMessage:!0}}),d=e=>l.e.post("/domains/update",e,{fetchOptions:{loading:i("domain.api.loading.updating"),successMessage:!0}}),u=e=>l.e.post("/domains/delete",e,{fetchOptions:{loading:i("domain.api.loading.deleting"),successMessage:!0}}),r=e=>l.e.post("/domains/set_ssl",e,{fetchOptions:{loading:i("domain.api.loading.settingSSL"),successMessage:!0}}),v=e=>l.e.get("/domains/get_ssl",{params:e}),c=e=>l.e.post("/domains/fresh_dns_records",e,{fetchOptions:{loading:i("domain.api.loading.refreshingDns"),successMessage:!0}}),m=e=>l.e.post("/ssl/apply_cert",e,{fetchOptions:{loading:i("domain.api.loading.applyingCert"),successMessage:!0}}),p=e=>l.e.post("/domains/set_default_domain",e,{fetchOptions:{loading:"Setting Default Domain, please wait...",successMessage:!0}})},51169:function(e,a,t){t.d(a,{d:()=>o});var l=t(58786),i=t(49247);let n=Symbol("MODAL_INJECT"),o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{state:a={},component:t,onCancel:o,onConfirm:s}=e,d=(0,l.qj)({});return t?[(0,l.aZ)({setup(i,o){let{attrs:s,slots:u}=o;return(0,l.JJ)(n,{state:a,options:e,extendApi:e=>{Object.setPrototypeOf(d,e)},setState:e=>{Object.assign(a,e)}}),()=>(0,l.h)(t,{...i,...s},u)}}),d]:[(0,l.aZ)({setup(a,t){let{attrs:u,slots:r}=t,v=(0,l.f3)(n),c=(0,l.iH)(!1);return d.open=()=>{var a;c.value=!0,null==(a=e.onChangeState)||a.call(e,c.value)},d.close=()=>{c.value=!1},d.setState=a=>{var t;null==v||v.setState(a),null==(t=e.onChangeState)||t.call(e,c.value)},d.getState=()=>(null==v?void 0:v.state)??{},null==v||v.extendApi(d),()=>(0,l.Wm)(i.Z,(0,l.dG)({show:c.value},a,u,{onCancel:o,onConfirm:s,"onUpdate:show":e=>{c.value=e??!1}}),r)}}),d]}},67377:function(e,a,t){t.r(a),t.d(a,{default:()=>E});var l=t(57869),i=t(58786),n=t(22895),o=t(68271),s=t(51169),d=t(34541);let u=e=>d.e.get("/overview",{params:e}),r=e=>d.e.get("/overview/failed",{params:e});var v=t(17977),c=t(16715),m=t(77227),p=t(8490),g=t(17987),w=t(36760),f=t(49468),_=t(39432),y=t(52495);let h={class:"filter-bar"},b={class:"w-260px"},S={class:"date-filters"},U={class:"w-240px"},k=(0,i.aZ)({__name:"FilterBar",props:{domain:{},domainModifiers:{},dateRange:{},dateRangeModifiers:{}},emits:["update:domain","update:dateRange"],setup(e){let{t:a}=(0,y.QT)(),t=(0,i.tT)(e,"domain"),l=(0,i.tT)(e,"dateRange"),n=(0,i.iH)([{label:a("common.all.domain"),value:""}]),s=(0,i.iH)("today"),d=e=>{let a=new Date,t=(0,g.E)(a,-30);return(0,w.b)(t).getTime()>e||(0,f.i)(a).getTime()<e},u=e=>{switch(e){case"today":l.value=(0,o.wb)();break;case"yesterday":l.value=(0,o.wb)((0,g.E)(new Date,-1));break;case"last7days":l.value=r()}},r=()=>{let e=new Date,a=(0,f.i)(e);return[(0,w.b)((0,g.E)(e,-6)).getTime(),a.getTime()]},k=e=>{s.value="custom",l.value=[(0,w.b)(e[0]).getTime(),(0,f.i)(e[1]).getTime()]},D=async()=>{let e=await (0,_.LC)();(0,o.kJ)(e)&&(n.value=e.map(e=>({label:e.domain,value:e.domain})),n.value.unshift({label:a("common.all.domain"),value:""}))};return(0,i.bv)(()=>{D()}),(e,a)=>{let o=p.Z,r=m.Z,g=c.Z,w=v.Z;return(0,i.wg)(),(0,i.iD)("div",h,[(0,i._)("div",b,[(0,i.Wm)(o,{value:t.value,"onUpdate:value":a[0]||(a[0]=e=>t.value=e),options:(0,i.SU)(n)},null,8,["value","options"])]),(0,i._)("div",S,[(0,i.Wm)(g,{value:(0,i.SU)(s),"onUpdate:value":[a[1]||(a[1]=e=>(0,i.dq)(s)?s.value=e:null),u]},{default:(0,i.w5)(()=>[(0,i.Wm)(r,{value:"today"},{default:(0,i.w5)(()=>[(0,i.Uk)((0,i.zw)(e.$t("common.time.today")),1)]),_:1}),(0,i.Wm)(r,{value:"yesterday"},{default:(0,i.w5)(()=>[(0,i.Uk)((0,i.zw)(e.$t("common.time.yesterday")),1)]),_:1}),(0,i.Wm)(r,{value:"last7days"},{default:(0,i.w5)(()=>[(0,i.Uk)((0,i.zw)(e.$t("common.time.last7days")),1)]),_:1})]),_:1},8,["value"]),(0,i._)("div",U,[(0,i.Wm)(w,{value:l.value,type:"daterange","is-date-disabled":d,"onUpdate:value":k},null,8,["value"])])])])}}});var D=t(41748);let Z=(0,D.default)(k,[["__scopeId","data-v-1552f451"]]);var W=t(18592),T=t(28405),H=t(94702),M=t(53475),O=t(75754),F=t(35409);let C=(0,i.aZ)({__name:"SendFailDetails",setup(e){let{t:a}=(0,y.QT)(),t=(0,i.iH)(!1),l=(0,i.iH)([]),n=(0,i.iH)([{key:"recipient",title:a("overview.sendFailDetails.columns.recipient"),width:160,render:e=>(0,i.Wm)(F.ZP,{class:e.tooltip?"":"break-all!","line-clamp":e.tooltip?999:1,tooltip:!1},{default:()=>[e.recipient]})},{key:"dsn",title:a("overview.sendFailDetails.columns.dsn"),width:60},{key:"delay",title:a("overview.sendFailDetails.columns.delay"),width:70},{key:"delays",title:a("overview.sendFailDetails.columns.delays"),width:150},{key:"status",title:a("overview.sendFailDetails.columns.status"),width:100,ellipsis:{tooltip:!0},render:e=>e.status},{key:"relay",title:a("overview.sendFailDetails.columns.relay"),width:200,render:e=>(0,i.Wm)(F.ZP,{class:e.tooltip?"":"break-all!","line-clamp":e.tooltip?9999:1,tooltip:!1},{default:()=>[e.relay]})},{key:"description",title:a("overview.sendFailDetails.columns.details"),render:e=>(0,i.Wm)(F.ZP,{class:e.tooltip?"":"break-all!","line-clamp":e.tooltip?9999:1,tooltip:!1},{default:()=>[e.description]})}]),d=e=>({onMousemove:()=>{e.tooltip=!0},onMouseleave:()=>{e.tooltip=!1}}),u=async(e,a,i)=>{try{t.value=!0;let n=await r({domain:e,start_time:a/1e3,end_time:i/1e3});l.value=(0,o.kJ)(n)?n:[]}finally{t.value=!1}},[v,c]=(0,s.d)({onChangeState:e=>{if(e){let e=c.getState();u(e.domain,e.startTime,e.endTime)}else l.value=[]}});return(e,o)=>{let s=O.Z;return(0,i.wg)(),(0,i.j4)((0,i.SU)(v),{title:(0,i.SU)(a)("overview.sendFailDetails.title"),width:1e3,footer:!1},{default:(0,i.w5)(()=>[(0,i.Wm)(s,{loading:(0,i.SU)(t),"max-height":600,data:(0,i.SU)(l),columns:(0,i.SU)(n),"row-props":d},null,8,["loading","data","columns"])]),_:1},8,["title"])}}}),j={class:"email-analytics-container"},x={class:"bt-title"},q={class:"metrics-cards"},J={class:"detail-row"},P={class:"rate-charts-card"},R=(0,i.aZ)({__name:"index",setup(e){let{t:a}=(0,y.QT)(),t=(0,i.iH)(""),d=(0,i.iH)((0,o.wb)()),r=(0,i.iH)([]),v=(0,i.qj)({delivery:{label:a("overview.delivered"),value:0},open:{label:a("overview.opened"),value:0},click:{label:a("overview.clicked"),value:0},bounce:{label:a("overview.bounced"),value:0}}),c=(0,i.iH)({column_type:"hourly",dashboard:{delivered:0,delivery_rate:0,failed:0,failure_rate:0,sends:0},data:[]}),m=(0,i.iH)({column_type:"hourly",data:[]}),p=(0,i.iH)({column_type:"hourly",data:[]}),g=(0,i.iH)({column_type:"hourly",data:[]}),[w,f]=(0,s.d)({component:C}),_=()=>{f.setState({domain:t.value,startTime:d.value[0],endTime:d.value[1]}),f.open()},h=(0,n.DI)(S,300),b=e=>{Object.entries(e).forEach(e=>{let[a,t]=e,l=a.replace("_rate","");l in v&&(v[l].value=t)})};async function S(){let e=await u({domain:t.value,start_time:Math.floor(d.value[0]/1e3),end_time:Math.floor(d.value[1]/1e3)});(0,o.Kn)(e)&&(b(e.dashboard),r.value=(0,o.kJ)(e.mail_providers)?e.mail_providers:[],c.value=e.send_mail_chart,m.value=e.bounce_rate_chart,p.value=e.click_rate_chart,g.value=e.open_rate_chart)}return(0,i.bv)(()=>{S()}),(e,n)=>{let o=l.ZP;return(0,i.wg)(),(0,i.iD)("div",j,[(0,i._)("div",x,(0,i.zw)((0,i.SU)(a)("layout.menu.overview")),1),(0,i.Wm)(Z,{domain:(0,i.SU)(t),"onUpdate:domain":[n[0]||(n[0]=e=>(0,i.dq)(t)?t.value=e:null),(0,i.SU)(h)],"date-range":(0,i.SU)(d),"onUpdate:dateRange":[n[1]||(n[1]=e=>(0,i.dq)(d)?d.value=e:null),(0,i.SU)(h)]},null,8,["domain","date-range","onUpdate:domain","onUpdate:dateRange"]),(0,i._)("div",q,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,i.SU)(v),(e,a)=>((0,i.wg)(),(0,i.j4)(W.Z,{key:a,title:e.label,value:e.value},null,8,["title","value"]))),128))]),(0,i._)("div",J,[(0,i.Wm)(o,{class:"provider-table-card",title:e.$t("overview.mailProviders")},{default:(0,i.w5)(()=>[(0,i.Wm)(T.Z,{value:(0,i.SU)(r),"onUpdate:value":n[2]||(n[2]=e=>(0,i.dq)(r)?r.value=e:null)},null,8,["value"])]),_:1},8,["title"]),(0,i.Wm)(o,{class:"send-today-card",title:e.$t("overview.sendStats")},{default:(0,i.w5)(()=>[(0,i.Wm)(H.Z,{data:(0,i.SU)(c),onShowFail:_},null,8,["data"])]),_:1},8,["title"])]),(0,i._)("div",P,[(0,i.Wm)(M.Z,{bounce:(0,i.SU)(m),click:(0,i.SU)(p),open:(0,i.SU)(g)},null,8,["bounce","click","open"])]),(0,i.Wm)((0,i.SU)(w))])}}}),E=(0,D.default)(R,[["__scopeId","data-v-f198c9f2"]])}}]);