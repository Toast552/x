"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["2614"],{39432:function(e,t,a){a.d(t,{Au:()=>c,Fj:()=>d,LC:()=>o,OV:()=>u,dj:()=>n,gK:()=>s,i7:()=>r,v1:()=>p,yW:()=>v});var l=a(34541);let{t:i}=a(76882).Z.global,r=e=>l.e.get("/domains/list",{params:e}),o=()=>l.e.get("/domains/all"),d=e=>l.e.post("/domains/create",e,{fetchOptions:{loading:i("domain.api.loading.creating"),successMessage:!0}}),s=e=>l.e.post("/domains/update",e,{fetchOptions:{loading:i("domain.api.loading.updating"),successMessage:!0}}),n=e=>l.e.post("/domains/delete",e,{fetchOptions:{loading:i("domain.api.loading.deleting"),successMessage:!0}}),u=e=>l.e.post("/domains/set_ssl",e,{fetchOptions:{loading:i("domain.api.loading.settingSSL"),successMessage:!0}}),c=e=>l.e.get("/domains/get_ssl",{params:e}),p=e=>l.e.post("/domains/fresh_dns_records",e,{fetchOptions:{loading:i("domain.api.loading.refreshingDns"),successMessage:!0}}),v=e=>l.e.post("/ssl/apply_cert",e,{fetchOptions:{loading:i("domain.api.loading.applyingCert"),successMessage:!0}})},51169:function(e,t,a){a.d(t,{d:()=>o});var l=a(58786),i=a(49247);let r=Symbol("MODAL_INJECT"),o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{state:t={},component:a,onCancel:o,onConfirm:d}=e,s=(0,l.qj)({});return a?[(0,l.aZ)({setup(i,o){let{attrs:d,slots:n}=o;return(0,l.JJ)(r,{state:t,options:e,extendApi:e=>{Object.setPrototypeOf(s,e)},setState:e=>{Object.assign(t,e)}}),()=>(0,l.h)(a,{...i,...d},n)}}),s]:[(0,l.aZ)({setup(t,a){let{attrs:n,slots:u}=a,c=(0,l.f3)(r),p=(0,l.iH)(!1);return s.open=()=>{var t;p.value=!0,null==(t=e.onChangeState)||t.call(e,p.value)},s.close=()=>{p.value=!1},s.setState=t=>{var a;null==c||c.setState(t),null==(a=e.onChangeState)||a.call(e,p.value)},s.getState=()=>(null==c?void 0:c.state)??{},null==c||c.extendApi(s),()=>(0,l.Wm)(i.Z,(0,l.dG)({show:p.value},t,n,{onCancel:o,onConfirm:d,"onUpdate:show":e=>{p.value=e??!1}}),u)}}),s]}},24598:function(e,t,a){a.r(t),a.d(t,{default:()=>eb});var l=a(57869),i=a(58786),r=a(22895),o=a(68271),d=a(51169),s=a(34541);let n=e=>s.e.get("/overview",{params:e}),u=e=>s.e.get("/overview/failed",{params:e});var c=a(17977),p=a(16715),v=a(77227),m=a(8490),y=a(17987),h=a(36760),_=a(49468),w=a(39432),g=a(52495);let b={class:"filter-bar"},f={class:"w-260px"},S={class:"date-filters"},k={class:"w-240px"},U=(0,i.aZ)({__name:"FilterBar",props:{domain:{},domainModifiers:{},dateRange:{},dateRangeModifiers:{}},emits:["update:domain","update:dateRange"],setup(e){let{t}=(0,g.QT)(),a=(0,i.tT)(e,"domain"),l=(0,i.tT)(e,"dateRange"),r=(0,i.iH)([{label:t("common.all.domain"),value:""}]),d=(0,i.iH)("today"),s=e=>{let t=new Date,a=(0,y.E)(t,-30);return(0,h.b)(a).getTime()>e||(0,_.i)(t).getTime()<e},n=e=>{switch(e){case"today":l.value=(0,o.wb)();break;case"yesterday":l.value=(0,o.wb)((0,y.E)(new Date,-1));break;case"last7days":l.value=u()}},u=()=>{let e=new Date,t=(0,_.i)(e);return[(0,h.b)((0,y.E)(e,-6)).getTime(),t.getTime()]},U=e=>{d.value="custom",l.value=[(0,h.b)(e[0]).getTime(),(0,_.i)(e[1]).getTime()]},x=async()=>{let e=await (0,w.LC)();(0,o.kJ)(e)&&(r.value=e.map(e=>({label:e.domain,value:e.domain})),r.value.unshift({label:t("common.all.domain"),value:""}))};return(0,i.bv)(()=>{x()}),(e,t)=>{let o=m.Z,u=v.Z,y=p.Z,h=c.Z;return(0,i.wg)(),(0,i.iD)("div",b,[(0,i._)("div",f,[(0,i.Wm)(o,{value:a.value,"onUpdate:value":t[0]||(t[0]=e=>a.value=e),options:(0,i.SU)(r)},null,8,["value","options"])]),(0,i._)("div",S,[(0,i.Wm)(y,{value:(0,i.SU)(d),"onUpdate:value":[t[1]||(t[1]=e=>(0,i.dq)(d)?d.value=e:null),n]},{default:(0,i.w5)(()=>[(0,i.Wm)(u,{value:"today"},{default:(0,i.w5)(()=>[(0,i.Uk)((0,i.zw)(e.$t("common.time.today")),1)]),_:1}),(0,i.Wm)(u,{value:"yesterday"},{default:(0,i.w5)(()=>[(0,i.Uk)((0,i.zw)(e.$t("common.time.yesterday")),1)]),_:1}),(0,i.Wm)(u,{value:"last7days"},{default:(0,i.w5)(()=>[(0,i.Uk)((0,i.zw)(e.$t("common.time.last7days")),1)]),_:1})]),_:1},8,["value"]),(0,i._)("div",k,[(0,i.Wm)(h,{value:l.value,type:"daterange","is-date-disabled":s,"onUpdate:value":U},null,8,["value"])])])])}}});var x=a(41748);let D=(0,x.default)(U,[["__scopeId","data-v-1552f451"]]),M={class:"title"},W={class:"value"},H=(0,i.aZ)({__name:"MetricCard",props:{title:{type:String,default:""},value:{type:Number,default:0}},setup:e=>(t,a)=>{let r=l.ZP;return(0,i.wg)(),(0,i.j4)(r,{class:"metric-card",bordered:!1},{default:(0,i.w5)(()=>[(0,i._)("div",M,(0,i.zw)(e.title),1),(0,i._)("div",W,(0,i.zw)(e.value)+"%",1)]),_:1})}}),F=(0,x.default)(H,[["__scopeId","data-v-1892d622"]]);var Z=a(75754);let T={class:"provider-table"},C=(0,i.aZ)({__name:"ProviderTable",props:{value:{},valueModifiers:{}},emits:["update:value"],setup(e){let{t}=(0,g.QT)(),a=(0,i.tT)(e,"value"),l=e=>e>=0?`${e}%`:"--",r=(0,i.iH)([{key:"mail_provider",title:t("overview.provider.mailProvider"),ellipsis:{tooltip:!0}},{key:"delivery_rate",title:t("overview.provider.delivered"),render:e=>l(e.delivery_rate)},{key:"open_rate",title:t("overview.provider.open"),render:e=>l(e.open_rate)},{key:"click_rate",title:t("overview.provider.click"),render:e=>l(e.click_rate)},{key:"bounce_rate",title:t("overview.provider.bounce"),render:e=>l(e.bounce_rate)}]);return(e,t)=>((0,i.wg)(),(0,i.iD)("div",T,[(0,i.Wm)((0,i.SU)(Z.Z),{columns:(0,i.SU)(r),data:a.value},null,8,["columns","data"])]))}});var O=a(67655),z=a(70392),j=a(82994),q=a(68449),R=a(90838),P=a(14863),$=a(72632),N=a(95691),A=a(58964),L=a(65391),I=a(45334),E=a(62635);let J={__name:"index",props:{options:{type:Object,required:!0},height:{type:[String,Number],default:"100%"},theme:{type:String,default:"default"},notMerge:{type:Boolean,default:!1},lazyUpdate:{type:Boolean,default:!1}},setup(e,t){let{expose:a}=t;z.D([P.N,$.N,N.N,A.N,L.N,I.N,q.N,R.N,E.N]);let l=(0,i.iH)(null),r=(0,i.Fl)(()=>"number"==typeof e.height?`${e.height}px`:e.height),o=null,d=null,s=()=>{l.value&&(o=j.S1(l.value,e.theme,{renderer:"canvas",useDirtyRect:!0}),n(),(d=new ResizeObserver(()=>{requestAnimationFrame(()=>{null==o||o.resize()})})).observe(l.value))},n=()=>{o&&e.options&&o.setOption(e.options,{notMerge:e.notMerge,lazyUpdate:e.lazyUpdate})};return(0,i.bv)(()=>{s()}),(0,i.SK)(()=>{null==d||d.disconnect(),o&&(o.dispose(),o=null)}),(0,i.YP)(()=>e.options,()=>{n()},{deep:!0}),(0,i.YP)(()=>e.theme,()=>{o&&(o.dispose(),s())}),a({getChartInstance:()=>o,resize:()=>null==o?void 0:o.resize()}),(e,t)=>((0,i.wg)(),(0,i.iD)("div",{ref_key:"chartRef",ref:l,style:(0,i.j5)({width:"100%",height:(0,i.SU)(r)})},null,4))}};var B=a(4020);let Q=(0,i.aZ)({__name:"BarChart",props:{dateType:{type:String,required:!0},chartData:{type:Object,required:!0}},setup(e){let t=(0,B.m)(),a=(0,i.Fl)(()=>{let{success:a,fail:l}=e.chartData;return{grid:{top:"16%",left:"2%",right:"2%",bottom:"4%",containLabel:!0},legend:{top:0,itemGap:16,icon:"circle",itemWidth:10,itemHeight:10,textStyle:{color:t.value.textColor2},data:[a.label,l.label]},tooltip:{trigger:"axis",order:"seriesDesc",axisPointer:{type:"shadow"}},xAxis:{type:"category",axisLabel:{formatter:t=>"hourly"===e.dateType?(0,o.mr)(t,"HH:mm"):(0,o.mr)(t,"yyyy-MM-dd")}},yAxis:{type:"value",boundaryGap:[0,"6%"],splitLine:{show:!0,lineStyle:{type:"dashed",width:1,color:t.value.borderColor}}},series:[{type:"bar",name:l.label,data:l.value,stack:"total",itemStyle:{color:"#1A519B"}},{type:"bar",name:a.label,data:a.value,stack:"total",itemStyle:{color:"#91CC75"}}]}});return(e,t)=>((0,i.wg)(),(0,i.j4)(J,{options:(0,i.SU)(a)},null,8,["options"]))}}),K={class:"send-today-stats"},Y={class:"stats-header"},G={class:"stat-item"},V={class:"stat-label"},X={class:"stat-value text-primary"},ee={class:"stat-item"},et={class:"stat-label"},ea={class:"stat-value text-primary"},el={class:"stat-item"},ei={class:"stat-label"},er={class:"stat-value"},eo={class:"h-180px"},ed=(0,i.aZ)({__name:"SendTodayStats",props:{data:{type:Object,required:!0}},emits:["showFail"],setup(e,t){let{emit:a}=t,{t:l}=(0,g.QT)(),r=(0,i.Fl)(()=>e.data.dashboard.delivery_rate),d=(0,i.Fl)(()=>e.data.dashboard.delivered),s=(0,i.Fl)(()=>e.data.dashboard.failed),n=()=>{a("showFail")},u=(e,t)=>{let a=new Date,l="";return"hourly"===e?(a.setMinutes(0),a.setSeconds(0),a.setHours(t),l="yyyy-MM-dd HH:mm"):"daily"===e&&(a=new Date(1e3*t),l="yyyy-MM-dd"),(0,o.mr)(a,l)},c=(0,i.Fl)(()=>{let t=[],a=[];return e.data.data.forEach(l=>{t.push([u(e.data.column_type,l.x),l.failed,e.data.column_type]),a.push([u(e.data.column_type,l.x),l.delivered,e.data.column_type])}),{fail:{label:l("overview.send.sendFail"),value:t},success:{label:l("overview.send.sendSuccess"),value:a}}});return(t,a)=>{let l=O.ZP;return(0,i.wg)(),(0,i.iD)("div",K,[(0,i._)("div",Y,[(0,i._)("div",G,[(0,i._)("div",V,(0,i.zw)(t.$t("overview.send.successRate")),1),(0,i._)("div",X,(0,i.zw)((0,i.SU)(r))+"%",1)]),(0,i._)("div",ee,[(0,i._)("div",et,(0,i.zw)(t.$t("overview.send.success")),1),(0,i._)("div",ea,(0,i.zw)((0,i.SU)(d)),1)]),(0,i._)("div",el,[(0,i._)("div",ei,(0,i.zw)(t.$t("overview.send.fail")),1),(0,i._)("div",er,[(0,i.Wm)(l,{text:"",type:"error",class:"text-18px! font-bold",onClick:n},{default:(0,i.w5)(()=>[(0,i.Uk)((0,i.zw)((0,i.SU)(s)),1)]),_:1})])])]),(0,i._)("div",eo,[(0,i.Wm)(Q,{"date-type":e.data.column_type,"chart-data":(0,i.SU)(c)},null,8,["date-type","chart-data"])])])}}}),es=(0,x.default)(ed,[["__scopeId","data-v-535f2108"]]),en={class:"h-180px"},eu=(0,i.aZ)({__name:"LineChart",props:{chartName:{type:String,required:!0},chartColor:{type:String,required:!0},dateType:{type:String,required:!0},chartData:{type:Array,required:!0}},setup(e){let t=(0,B.m)(),a=(0,i.Fl)(()=>({tooltip:{trigger:"axis",order:"seriesDesc",axisPointer:{type:"shadow"}},grid:{top:"16%",left:"2%",right:"2%",bottom:"2%",containLabel:!0},xAxis:{type:"category",axisLabel:{formatter:t=>"hourly"===e.dateType?(0,o.mr)(t,"HH:mm"):(0,o.mr)(t,"yyyy-MM-dd")}},yAxis:{name:"%",type:"value",splitLine:{show:!0,lineStyle:{type:"dashed",width:1,color:t.value.borderColor}},max:()=>100},series:[{name:e.chartName,type:"line",data:e.chartData,itemStyle:{color:e.chartColor},smooth:!1,showSymbol:!1,sampling:"average"}]}));return(e,t)=>((0,i.wg)(),(0,i.iD)("div",en,[(0,i.Wm)(J,{options:(0,i.SU)(a)},null,8,["options"])]))}}),ec=(0,i.aZ)({__name:"RateChartPanel",props:{bounce:{type:Object,required:!0},click:{type:Object,required:!0},open:{type:Object,required:!0}},setup(e){let t=(e,t)=>{let a=new Date,l="";return"hourly"===e?(a.setMinutes(0),a.setSeconds(0),a.setHours(t),l="yyyy-MM-dd HH:mm"):"daily"===e&&(a=new Date(1e3*t),l="yyyy-MM-dd"),(0,o.mr)(a,l)},a=(0,i.Fl)(()=>e.open.data.map(a=>[t(e.open.column_type,a.x),a.open_rate])),r=(0,i.Fl)(()=>e.click.data.map(a=>[t(e.click.column_type,a.x),a.click_rate])),d=(0,i.Fl)(()=>e.bounce.data.map(a=>[t(e.bounce.column_type,a.x),a.bounce_rate]));return(t,o)=>{let s=l.ZP;return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(s,{title:t.$t("overview.rate.openRate")},{default:(0,i.w5)(()=>[(0,i.Wm)(eu,{"chart-color":"#1a519b","date-type":e.open.column_type,"chart-name":t.$t("overview.rate.openRate"),"chart-data":(0,i.SU)(a)},null,8,["date-type","chart-name","chart-data"])]),_:1},8,["title"]),(0,i.Wm)(s,{title:t.$t("overview.rate.clickRate")},{default:(0,i.w5)(()=>[(0,i.Wm)(eu,{"chart-color":"#1a519b","date-type":e.click.column_type,"chart-name":t.$t("overview.rate.clickRate"),"chart-data":(0,i.SU)(r)},null,8,["date-type","chart-name","chart-data"])]),_:1},8,["title"]),(0,i.Wm)(s,{title:t.$t("overview.rate.bounceRate")},{default:(0,i.w5)(()=>[(0,i.Wm)(eu,{"chart-color":"#20a53a","date-type":e.bounce.column_type,"chart-name":t.$t("overview.rate.bounceRate"),"chart-data":(0,i.SU)(d)},null,8,["date-type","chart-name","chart-data"])]),_:1},8,["title"])],64)}}});var ep=a(35409);let ev=(0,i.aZ)({__name:"SendFailDetails",setup(e){let{t}=(0,g.QT)(),a=(0,i.iH)(!1),l=(0,i.iH)([]),r=(0,i.iH)([{key:"recipient",title:t("overview.sendFailDetails.columns.recipient"),width:160,render:e=>(0,i.Wm)(ep.ZP,{class:e.tooltip?"":"break-all!","line-clamp":e.tooltip?999:1,tooltip:!1},{default:()=>[e.recipient]})},{key:"dsn",title:t("overview.sendFailDetails.columns.dsn"),width:60},{key:"delay",title:t("overview.sendFailDetails.columns.delay"),width:70},{key:"delays",title:t("overview.sendFailDetails.columns.delays"),width:150},{key:"status",title:t("overview.sendFailDetails.columns.status"),width:100,ellipsis:{tooltip:!0},render:e=>e.status},{key:"relay",title:t("overview.sendFailDetails.columns.relay"),width:200,render:e=>(0,i.Wm)(ep.ZP,{class:e.tooltip?"":"break-all!","line-clamp":e.tooltip?9999:1,tooltip:!1},{default:()=>[e.relay]})},{key:"description",title:t("overview.sendFailDetails.columns.details"),render:e=>(0,i.Wm)(ep.ZP,{class:e.tooltip?"":"break-all!","line-clamp":e.tooltip?9999:1,tooltip:!1},{default:()=>[e.description]})}]),s=e=>({onMousemove:()=>{e.tooltip=!0},onMouseleave:()=>{e.tooltip=!1}}),n=async(e,t,i)=>{try{a.value=!0;let r=await u({domain:e,start_time:t/1e3,end_time:i/1e3});l.value=(0,o.kJ)(r)?r:[]}finally{a.value=!1}},[c,p]=(0,d.d)({onChangeState:e=>{if(e){let e=p.getState();n(e.domain,e.startTime,e.endTime)}else l.value=[]}});return(e,o)=>{let d=Z.Z;return(0,i.wg)(),(0,i.j4)((0,i.SU)(c),{title:(0,i.SU)(t)("overview.sendFailDetails.title"),width:1e3,footer:!1},{default:(0,i.w5)(()=>[(0,i.Wm)(d,{loading:(0,i.SU)(a),"max-height":600,data:(0,i.SU)(l),columns:(0,i.SU)(r),"row-props":s},null,8,["loading","data","columns"])]),_:1},8,["title"])}}}),em={class:"email-analytics-container"},ey={class:"bt-title"},eh={class:"metrics-cards"},e_={class:"detail-row"},ew={class:"rate-charts-card"},eg=(0,i.aZ)({__name:"index",setup(e){let{t}=(0,g.QT)(),a=(0,i.iH)(""),s=(0,i.iH)((0,o.wb)()),u=(0,i.iH)([]),c=(0,i.qj)({delivery:{label:t("overview.delivered"),value:0},open:{label:t("overview.opened"),value:0},click:{label:t("overview.clicked"),value:0},bounce:{label:t("overview.bounced"),value:0}}),p=(0,i.iH)({column_type:"hourly",dashboard:{delivered:0,delivery_rate:0,failed:0,failure_rate:0,sends:0},data:[]}),v=(0,i.iH)({column_type:"hourly",data:[]}),m=(0,i.iH)({column_type:"hourly",data:[]}),y=(0,i.iH)({column_type:"hourly",data:[]}),[h,_]=(0,d.d)({component:ev}),w=()=>{_.setState({domain:a.value,startTime:s.value[0],endTime:s.value[1]}),_.open()},b=(0,r.DI)(S,300),f=e=>{Object.entries(e).forEach(e=>{let[t,a]=e,l=t.replace("_rate","");l in c&&(c[l].value=a)})};async function S(){let e=await n({domain:a.value,start_time:Math.floor(s.value[0]/1e3),end_time:Math.floor(s.value[1]/1e3)});(0,o.Kn)(e)&&(f(e.dashboard),u.value=(0,o.kJ)(e.mail_providers)?e.mail_providers:[],p.value=e.send_mail_chart,v.value=e.bounce_rate_chart,m.value=e.click_rate_chart,y.value=e.open_rate_chart)}return(0,i.bv)(()=>{S()}),(e,r)=>{let o=l.ZP;return(0,i.wg)(),(0,i.iD)("div",em,[(0,i._)("div",ey,(0,i.zw)((0,i.SU)(t)("layout.menu.overview")),1),(0,i.Wm)(D,{domain:(0,i.SU)(a),"onUpdate:domain":[r[0]||(r[0]=e=>(0,i.dq)(a)?a.value=e:null),(0,i.SU)(b)],"date-range":(0,i.SU)(s),"onUpdate:dateRange":[r[1]||(r[1]=e=>(0,i.dq)(s)?s.value=e:null),(0,i.SU)(b)]},null,8,["domain","date-range","onUpdate:domain","onUpdate:dateRange"]),(0,i._)("div",eh,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,i.SU)(c),(e,t)=>((0,i.wg)(),(0,i.j4)(F,{key:t,title:e.label,value:e.value},null,8,["title","value"]))),128))]),(0,i._)("div",e_,[(0,i.Wm)(o,{class:"provider-table-card",title:e.$t("overview.mailProviders")},{default:(0,i.w5)(()=>[(0,i.Wm)(C,{value:(0,i.SU)(u),"onUpdate:value":r[2]||(r[2]=e=>(0,i.dq)(u)?u.value=e:null)},null,8,["value"])]),_:1},8,["title"]),(0,i.Wm)(o,{class:"send-today-card",title:e.$t("overview.sendStats")},{default:(0,i.w5)(()=>[(0,i.Wm)(es,{data:(0,i.SU)(p),onShowFail:w},null,8,["data"])]),_:1},8,["title"])]),(0,i._)("div",ew,[(0,i.Wm)(ec,{bounce:(0,i.SU)(v),click:(0,i.SU)(m),open:(0,i.SU)(y)},null,8,["bounce","click","open"])]),(0,i.Wm)((0,i.SU)(h))])}}}),eb=(0,x.default)(eg,[["__scopeId","data-v-f198c9f2"]])}}]);